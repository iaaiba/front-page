<h2 class="title mt-5">Primeiro Acesso</h2>

<form [formGroup]="form" class="form block-center pb-4">
    <label for="password">Senha</label>
    <mat-form-field appearance="outline">
        <input
            matInput
            formControlName="password"
            autocomplete="new-password"
            [type]="isPasswordHidden ? 'password' : 'text'">

        <button
            mat-icon-button
            matSuffix
            class="material-icons-outlined"
            (click)="isPasswordHidden = !isPasswordHidden">

            <mat-icon class="material-icons-outlined">
                {{ isPasswordHidden ? 'visibility' : 'visibility_off' }}
            </mat-icon>
        </button>

        <mat-error *ngIf="getError('password')?.required">
            Campo obrigatório
        </mat-error>

        <mat-error *ngIf="getError('password')?.minlength">
            Senha deve ter no mínimo {{ getError('password').minlength.requiredLength }} caracteres
        </mat-error>
    </mat-form-field>

    <label for="confirmPassword">Repetir senha</label>
    <mat-form-field appearance="outline">
        <input
            matInput
            formControlName="confirmPassword"
            autocomplete="new-password"
            [type]="isPasswordHidden ? 'password' : 'text'">

        <button
            mat-icon-button
            matSuffix
            class="material-icons-outlined"
            (click)="isPasswordHidden = !isPasswordHidden">

            <mat-icon class="material-icons-outlined">
                {{ isPasswordHidden ? 'visibility' : 'visibility_off' }}
            </mat-icon>
        </button>

        <mat-error *ngIf="getError('confirmPassword')?.required">
            Campo obrigatório
        </mat-error>

        <mat-error *ngIf="getError('confirmPassword')?.notEquals">
            As senhas não correspondem
        </mat-error>
    </mat-form-field>

    <div class="form-footer mt-4">
        <button
            mat-flat-button
            color="primary"
            class="button-save"
            (click)="submit()">
            
            <span>Salvar</span>
            <mat-icon class="ml-2">east</mat-icon>
        </button>

        <a routerLink="../../sign-in" class="link-green mt-2">ou faça login</a>
    </div>
</form>
